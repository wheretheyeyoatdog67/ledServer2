<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <link rel="stylesheet" href="style.css">

<body>
  <h1>Custom Range Slider</h1>
  <div class="slidecontainer">
    <p>Red slider:</p>
    <input type="range" min="1" max="255" value="50" class="slider" id="rRange">
    <p>Green slider:</p>
    <input type="range" min="1" max="255" value="50" class="slider" id="gRange">
    <p>Blue slider:</p>
    <input type="range" min="1" max="255" value="50" class="slider" id="bRange">
  </div>
</head>
<p1>red: <span id="redy"></span><br/></p1>
<p1>green: <span id="greeny"></span><br/></p1>
<p1>blue: <span id="bluey"></span><br/></p1>

  <button onclick="myFunction(data)">Send Colors</button>

  <script>

    document.getElementById("redy").textContent = document.getElementById("rRange").value;
    document.getElementById("greeny").textContent = document.getElementById("gRange").value;
    document.getElementById("bluey").textContent = document.getElementById("bRange").value;
    var red = document.getElementById("rRange").value;
    var green = document.getElementById("gRange").value;
    var blue = document.getElementById("bRange").value;
    let data = {red, green, blue}


    var slider = document.getElementById("rRange");
    slider.oninput = function() {
    document.getElementById("redy").textContent = document.getElementById("rRange").value;
    data.red = document.getElementById("rRange").value;
    }
    var slider = document.getElementById("gRange");
    slider.oninput = function() {
    document.getElementById("greeny").textContent = document.getElementById("gRange").value;
    data.green = document.getElementById("gRange").value;

  }
    var slider = document.getElementById("bRange");
    slider.oninput = function() {
    document.getElementById("bluey").textContent = document.getElementById("bRange").value;
    data.blue = document.getElementById("bRange").value;

  }

  function myFunction(data) {
    console.log(data);
    const options = {
      method: 'POST',
      headers: {
        "Content-Type": "application/json"},
      body: JSON.stringify(data)
    };
    fetch('/api',options).then(response => {console.log(response.json);});
  }

  async function getData(){
      const response = await fetch('/api');
      const dataResp = await response.json();
      console.log(dataResp)
  }
 //  const interval = setInterval(function() {
 //   var respData = getData();
 //   document.getElementById("rRange").value = respData.red;
 //   document.getElementById("gRange").value = respData.green;
 //   document.getElementById("bRange").value = respData.blue;
 // }, 10000);



  </script>

</body>
</html>
